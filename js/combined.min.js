!function(){var e,s,o,a,n,t,r,g=[{name:"mainnet",currency:"ETH",id:1,supported:!1},{name:"rinkeby",currency:"ETH",id:4,supported:!0},{name:"polygon",currency:"MATIC",id:137,supported:!1},{name:"mumbai",currency:"MATIC",id:80001,supported:!0}],_="https://github.com/chainrand",m=function(e){var a=function(e,a){var n=0,t=[];for(e=e.slice(),a=a.slice();e.length||a.length;){var i=(e.pop()||0)+(a.pop()||0)+n;t.unshift(i<10?i:i-10),n=i<10?0:1}return n&&t.unshift(n),t};if(e=e.trim(),/^(0x)?[0-9a-f]+$/i.test(e)){for(var n=[0],t=0;t<e.length;++t)for(var i=parseInt(e.charAt(t),16),s=8;s;s>>=1)n=a(n,n),i&s&&(n=a(n,[1]));return n.join("")}return null},i=navigator.userAgent,b=(i.match(/Linux/i)&&i.match(/Android/i)&&i.match(/Mozilla/i)&&i.match(/AppleWebKit/i)&&i.match(/Chrome/i),i.match(/iPhone|iPad|iPod/i)&&i.match(/AppleWebKit/),i.match(/iPad|iPhone|Android|BlackBerry|webOS|Mobile/i)&&(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone),function(e){return(e=""+e).charAt(0).toUpperCase()+e.slice(1)}),y=(s=(e||"1").split(""),o="0123456789abcdefghijklmnopqrstuvwxyz",a=function(e){for(var a=0<e?1:-1,n=Math.abs(e);n--;)for(var t=s.length;t--;){var i=o.indexOf(s[t])+a;i<o.length?(s[t]=o.charAt(i),t=0):(s[t]="0",t||(s.unshift("1"),t=0))}return s.join("")},function(){return"elId_"+a(1)}),w=(t={},r=function(e){return t[e]||(t[e]=y()),t[e]},(n={}).ctx=function(e){return["div",{class:"wallet",id:r(e)}]},n.sync=function(e){var a=r(e),n=D.walletAddress,t=["div",{class:"info"}];if(n?n=["span",["i",{class:"icon-link"}]," ",n="0x"+(n.substr(2,6)+"..."+n.substr(-6)).toUpperCase()]:D.chainUnsupported?n=["span",["i",{class:"icon-attention"}]]:(n=["span",["i",{class:"icon-login"}]," Connect Wallet "],t.push({class:"unconnected"})),t.push(["span",{class:"address"},n]),D.chainId){for(var i="",s=0;s<g.length;++s)g[s].id==D.chainId&&(i=g[s].name);t.push(["span",{class:"c-chain"}," (",["span",{class:"chain"},b(i)],")"])}else D.chainUnsupported&&t.push(["span",{class:"c-chain"}," Chain Unsupported!"]);$("#"+a).html(HTML(t)).find(".info").click(function(){D.walletAddress||D.chainUnsupported||D.signIn(function(){V.sync()})})},n),I=function(e){return/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})$/.test(e)},k=function(e){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},A=function(e){return/^(0?\.0*?[0-9]*|[1-9][0-9]*\.?[0-9]+|0)$/.test(e)},c=new Big("1000000000000000000"),T=function(e){try{return new Big(""+e).mul(c)+""}catch(e){return""}},R=function(e){try{return new Big(""+e).div(c)+""}catch(e){return""}},v=function(e){e.removeAttr("disabled")},p=function(e){e.attr("disabled","disabled")},C=function(e,a){var n,t="",i="https://opensea.io/assets",s="https://testnets.opensea.io/assets";if((1==n?t=i:4==a?t=s:137==a?t=i+"/matic":80001==a&&(t=s+"/mumbai"),t)&&((n=D.config)&&(n=n.chainrand)&&(n=n.addresses)&&(n=n[a])))return t+"/"+n+"/"+e;return""},d=function(e){if("string"==typeof e||f.constructor==String)return 0<e.length};$(function(){var n=B.alert;B.alert=function(e){n({body:HTML(["div",{class:"alert-body"},e]),footer:HTML(["div",{class:"alert-footer"},["button",{class:"ok light"},"Ok"]]),afterShow:function(){$(".alert-footer .ok").click(function(){n.close()})}})},B.confirm=function(e,a){n({body:HTML(["div",{class:"alert-body"},e]),footer:HTML(["div",{class:"alert-footer"},["button",{class:"cancel light"},"Cancel"],["div",{class:"spacer"}],["button",{class:"ok"},"Ok"]]),afterShow:function(){$(".alert-footer .ok").click(function(){n.close(),a()}),$(".alert-footer .cancel").click(function(){n.close()})}})}});var l,u,h,S,F,H,M,L,U,x,z,P,j,E,N,K,G=function(e){var a,n={};for(var t in e){var i=e[t].value;d(i)&&(a=i,i=String.prototype.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),n[e[t].name]=i}return n},B=(l="modal"+(Math.random()+"").substr(3),u=function(e){var a=$("#"+l);if(a.length<1){var n=HTML.SVG,t=n.Path,i=n(18,18,t.M(0,0).L(18,18),t.M(0,18).L(18,0)),s=["div",{class:"modal",id:l},["div",{class:"modal-dialog"},["div",{class:"modal-content"},["div",{class:"modal-header"},["div",{class:"modal-close"},i],["div",{class:"modal-title"}]],["div",{class:"modal-body"}],["div",{class:"modal-footer"}]]],["div",{class:"modal-overlay"}]];$("body").append(HTML(s)),a=$("#"+l)}"title"in e?a.find(".modal-title").html(e.title).show():a.find(".modal-title").hide(),"body"in e?a.find(".modal-body").html(e.body).show():a.find(".modal-body").hide(),"footer"in e?a.find(".modal-footer").html(e.footer).show():a.find(".modal-footer").hide(),u.close=function(){u.active=0,a.removeClass("active"),$("body").removeClass("modal-shown-body"),setTimeout(function(){u.active||a.hide()},300)},u.hide=u.close,u.active=1,"beforeShow"in e&&$.isFunction(e.beforeShow)&&e.beforeShow(),a.show(),setTimeout(function(){a.addClass("active"),a.find(".modal-close").click(u.close),a.find(".modal-overlay").click(u.close),"afterShow"in e&&$.isFunction(e.afterShow)&&setTimeout(e.afterShow,300),$("body").addClass("modal-shown-body")},10)},h="alert"+(Math.random()+"").substr(3),S=function(e){var a=$("#"+h);if(a.length<1){var n=["div",{class:"modal-alert",id:h},["div",{class:"modal-dialog"},["div",{class:"modal-content"},["div",{class:"modal-body"}],["div",{class:"modal-footer"}]]],["div",{class:"modal-overlay"}]];$("body").append(HTML(n)),a=$("#"+h)}"body"in e?a.find(".modal-body").html(e.body).show():a.find(".modal-body").hide(),"footer"in e?a.find(".modal-footer").html(e.footer).show():a.find(".modal-footer").hide(),S.close=function(){S.active=0,a.removeClass("active"),$("body").removeClass("modal-alert-shown-body"),setTimeout(function(){S.active||a.hide()},300)},S.hide=S.close,S.active=1,"beforeShow"in e&&$.isFunction(e.beforeShow)&&e.beforeShow(),a.show(),setTimeout(function(){a.addClass("active"),a.find(".modal-close").click(S.close),a.find(".modal-overlay").click(S.close),"afterShow"in e&&$.isFunction(e.afterShow)&&setTimeout(e.afterShow,300),$("body").addClass("modal-alert-shown-body")},10)},u.alert=S,u),O=103,D={walletAddress:null,config:null,contracts:null},q=function(l,a){for(var e in l.contracts={},l.config)for(var n in l.contracts[e]={},l.config[e])l.contracts[e][n]=null;var i=function(e,a){var n="crls_"+e,t=window.localStorage.getItem(n);return null===t?(window.localStorage.setItem(n,a),a):t},s=function(e,a){var n="crls_"+e;window.localStorage.setItem(n,a)},d=function(e,a){for(var n=e?e[a]:null,t=[],i=2;i<arguments.length;++i)t.push(arguments[i]);$.isFunction(n)?n.apply(void 0,t):"success"==a&&$.isFunction(e)&&e.apply(void 0,t)};void 0!==window.ethereum&&(l.web3=new Web3(window.ethereum));var t=function(e){for(var a in l.config)if(!l.config[a].addresses[e])return!1;return!0},u=function(a,e){return{success:e,error:function(e){d(a,"error",e)}}},f=function(a){l.web3?l.web3.eth.net.getId().then(function(e){t(e)?(l.chainId=e,l.chainUnsupported=0,d(a,"success",e)):(l.chainId=null,l.walletAddress=null,l.chainUnsupported=1,d(a,"error",{code:102}))}).catch(function(e){l.chainId=null,l.walletAddress=null,l.chainUnsupported=0,d(a,"error",{code:101})}):(l.chainId=null,l.walletAddress=null,l.chainUnsupported=0,d(a,"error",{code:101}))},h=function(a,n){f(u(a,function(e){l.chainId=e,(n?l.web3.eth.getAccounts():window.ethereum.request({method:"eth_requestAccounts"})).then(function(e){l.walletAddress=e[0],d(a,"success",l.walletAddress)}).catch(function(e){l.walletAddress=null,d(a,"error",{code:105})})}))},m=function(e){h(e,1)},o=function(){return null!==l.walletAddress&&null!==l.chainId},v=function(a){var e=arguments,n=e.length,t=e[n-1],i=2<n?e[1]:"",s=[];if(3<n)for(var o=2;o<n-1;++o)s.push(e[o]);var r=a.split("!");a=r[0];var c=u(t,function(e){if(l.contracts[a][e]||(l.contracts[a][e]=new l.web3.eth.Contract(l.config[a].abi,l.config[a].addresses[e])),""==i)d(t,"success",l.contracts[a][e]);else try{l.contracts[a][e].methods[i].apply(void 0,s).call().then(function(e){d(t,"success",e)}).catch(function(e){d(t,"error",{code:O})})}catch(e){d(t,"error",{code:O})}});1<r.length?m(u(c,function(){l.isSignedIn()?d(c,"success",l.chainId):h(u(c,function(){l.walletAddress&&l.chainId?d(c,"success",l.chainId):d(c,"error",{code:101})}))})):f(c)},r="authorizeLinkPending",c=function(e){var a=i(r,{});delete a[e],s(r,a)},p=function(n,t){l.web3.eth.getTransactionReceipt(n,function(e,a){e||(null==a?setTimeout(function(){p(n,t)},5e3):d(t,"success",a.status))})},g=function(a,n,t){a.estimateGas(n).then(function(e){n.gas=e,a.send(n).on("transactionHash",function(e){d(t,"success",e)}).catch(function(e){d(t,"error",{code:O,message:"Transaction failed."})})}).catch(function(e){d(t,"error",{code:O,message:function(e){var a=""+((l.ethError=e)?e.message:"");if(/insufficient/i.test(a))return"Insufficient funds for payment and gas fees.";try{var n,t=JSON.parse(a.substr(a.indexOf("{")));return((n=t.originalError)&&(n=n.message)||(n=t.message))&&(t=n.replace(/^[^:]+:\s*/,"")),t}catch(e){return"Transaction failed."}}(e)})})};l.getEtherscanLink=function(e){var a,n="";if(80001==l.chainId&&(n="https://mumbai.polygonscan.com/address/"),1==l.chainId&&(n="https://etherscan.io/address/"),4==l.chainId&&(n="https://rinkeby.etherscan.io/address/"),137==l.chainId&&(n="https://polygonscan.com/address/"),l.chainId&&(a=l.config[e])&&(a=a.addresses)&&(a=a[l.chainId]))return n+a;return""},l.signIn=h,l.silentSignIn=m,l.chainIsSupported=t,l.callContract=v,l.authorizeLink=function(t){v("chainlink!",u(t,function(e){var a=l.config.chainrand.addresses[l.chainId],n=e.methods.approve(a,"100000000000000000000000000");g(n,{from:l.walletAddress},u(t,function(a){var e,n;d(t,"pending",a),e=a,(n=i(r,{}))[e]={walletAddress:l.walletAddress,chainId:l.chainId},s(r,n),p(a,function(e){c(a),d(t,"success",e)})}))}))},l.checkHasAuthorizedLink=function(n){v("chainlink!","allowance",l.walletAddress,l.config.chainrand.addresses[l.chainId],u(n,function(e){if("0"!=(e=""+e))d(n,"success",!0);else{var a=function(){var e=i(r,{});for(var a in e){var n=e[a];if(n.walletAddress==l.walletAddress&&n.chainId==l.chainId)return a}return null}();a?(d(n,"pending"),p(a,function(e){c(a),d(n,"success",e)})):d(n,"success",!1)}}))},l.waitTransactionMined=p,l.mint=function(n,t,i,s,o,r,c,d){v("chainrand!",u(d,function(e){var a=e.methods.mint(n,t,i,s,o,r);g(a,{from:l.walletAddress,value:c},d)}))},l.updateToken=function(n,e,t,i){var s="set"+b(e);v("chainrand!",u(i,function(e){var a=e.methods[s](n,t);g(a,{from:l.walletAddress},i)}))},l.payToken=function(n,t,i){v("chainrand!",u(i,function(e){var a=e.methods.pay(n);g(a,{from:l.walletAddress,value:t},i)}))},l.isSignedIn=o,window.ethereum.on("accountsChanged",function(e){m(a)}),window.ethereum.on("networkChanged",function(e){m(a)}),window.ethereum.on("chainChanged",function(e){m(a)}),m(a)},V=(H=[],M=["div",{id:"pages"}],L=[],x=!(U=function(e,a){for(var n=e?e[a]:null,t=[],i=2;i<arguments.length;++i)t.push(arguments[i]);$.isFunction(n)&&n.apply(void 0,t)}),(F={}).add=function(n){n.path=n.label.replace(/\s+/g,"-").toLowerCase(),n.synced=!1,n.inited=!1,n.visible=!1,n.sel='#pages .page[path="'+n.path+'"]',H.push(n),M.push(["div",{class:"page",path:n.path}]),L.push(["a",{href:"#/"+n.path},b(n.label)]),HTML.route(n.path,function(){for(var e=0;e<H.length;++e){var a=H[e];a.path==n.path?(a.visible=!0,a.inited||(U(a,"init",a.sel),a.inited=!0),$(a.sel).show(),U(a,"show",a.sel),x&&(a.synced||(U(a,"sync",a.sel),a.synced=!0))):($(a.sel).hide(),U(a,"hide",a.sel),a.visible=!1)}})},F.init=function(){var e=["div",{id:"navbar"},["div",{class:"desktop"},["table",["tr",["td",{class:"c-logo"},["a",{href:"#/home"},["img",{src:"assets/nav_logo.png"}]]],["td",{class:"c-links"},L],["td",{class:"c-s0cial"},""]]]],["div",{class:"mobile"},["table",["tr",["td",{class:"c-hamburger"},["div",{class:"hamburger"},["div",{class:"l-0"}],["div",{class:"l-1"}],["div",{class:"l-2"}]]],["td",{class:"c-logo"},["img",{src:"assets/nav_logo.png"}]],["td",{class:"c-right"}]]]],["div",{class:"slider"},["div",{class:"c-links"},L],["div",{class:"c-s0cial"},""],["div",{class:"bg"}],["div",{class:"overlay"}]]];$("body").html(HTML([e,M])),HTML.route.go(":home"),function(){var t=0;$("#navbar .slider").hide(),$("#navbar .hamburger").click(function(){if(!t){t=1;var e=$(this),a=$("#navbar .slider"),n=a.find("a");e.hasClass("active")?(setTimeout(function(){$("#navbar").removeClass("slided")},200),e.removeClass("active"),a.removeClass("active"),n.each(function(e,a){setTimeout(function(){a.style.opacity=0},Math.max(0,30*(n.length-3-e)))}),setTimeout(function(){t=0,a.hide()},700)):(a.show(),setTimeout(function(){e.addClass("active"),a.addClass("active"),n.each(function(e,a){setTimeout(function(){a.style.opacity=1},60*e)}),setTimeout(function(){t=0},500)},15),$("#navbar").addClass("slided"))}});var n=function(){t?setTimeout(n,60):$("#navbar .hamburger").click()};$("#navbar .slider a, #navbar .slider .overlay").click(function(){var e=$(this).attr("href"),a=$(this).attr("target");e&&"#"!=(""+e).substr(0,1)&&"_blank"!=a||n()})}()},F.sync=function(){x=!0;for(var e=0;e<H.length;++e){var a=H[e];a.visible?(U(a,"sync",a.sel),a.synced=!0):a.synced=!1}},F);!function(){var i,n,s,o,r,c,d,t,l,u,f,h,m,v,p,g=["#ifdef GL_ES","precision mediump float;","#endif","attribute vec2 aPos;","void main() {","gl_Position = vec4(aPos, 0.0, 1.0);","}"].join("\n"),b=["// Author @patriciogv - 2015","// Title: DeFrag","// Adapted from https://thebookofshaders.com/edit.php#10/ikeda-04.frag","#ifdef GL_ES","precision mediump float;","#endif","uniform float u[5];","float random (float x) { return fract(sin(x)*1e4); }","float random (vec2 _st) { return fract(sin(dot(_st.xy, vec2(12.9898,78.233)))* 43758.5453123);}","void main() {","vec2 u_resolution = vec2(u[0], u[1]);","vec2 u_mouse = vec2(u[2], u[3]);","float u_time = u[4];","vec2 st = gl_FragCoord.xy/u_resolution.xy;","st.x *= u_resolution.x/u_resolution.y;","vec2 grid = vec2(100.0,100.0);","st *= grid;","vec2 ipos = floor(st);","vec2 vel = vec2(u_time*10.);","vel *= vec2(-1.,0.);","vel *= (step(1., mod(ipos.y,2.0))-0.5)*2.; // Opposite directions","vel *= random(ipos.y); // random speed","vec3 color = vec3(1.0);","color *= step(grid.y,ipos.y);","color += step(0.0,ipos.y);","color = clamp(color,vec3(0.),vec3(1.));","float fadeFactor = abs(u_mouse.y/u_resolution.y-0.5);","fadeFactor = fadeFactor + abs(u_mouse.x/u_resolution.x-0.5);","fadeFactor = 0.5 + clamp(fadeFactor * 0.5, 0.1, 0.5) * 0.5;","color *= random(floor(st+vel));","color = smoothstep(0.0, fadeFactor, color*color);","color = step(fadeFactor,color); // threshold","// Margin","float margin = 0.2;","color *= step(margin,fract(st.x+vel.x))*step(margin,fract(st.y+vel.y));","gl_FragColor = vec4(1.90-color,1.0);","}"].join("\n"),y=0,w=0,a=["div",["div",{class:"splash"},["canvas",{class:"bg"}],["div",{class:"front"},["div",{class:"title"},"Fair Randomness Anywhere"],["div",{class:"tagline"},"Generate verfiable random numbers efficiently without limits"],["div",{class:"buttons"},["a",{class:"mint",href:"#/mint"},["div","Mint"],["div",{class:"b-0"}],["div",{class:"b-1"}]],["div",{class:"spacer"}],["a",{class:"github",href:_,target:"_blank"},["div","Github"],["div",{class:"b-0"}],["div",{class:"b-1"}]]]]]],e=["div",["p","Random number generators are prevalent in our everyday lives. "],["p","It is important for RNGs to be unbiased and incorruptible."],["p","However, RNG seeds can be cherry-picked to achieve ","unfair outcomes in subtle ways. ","This is a common problem in many fields ","known as Statistical P-Hacking, ","which is very hard to detect, or disprove."],["p","With Chainrand, it is now easy to use ","Chainlink Verifiable Random Functions ","for flexible, efficient computations in off-chain code ","in a verfiably fair way. "]],I=["div",{class:"s-intro"},["div",{class:"desktop"},["table",["tr",["td",{class:"t-0"},["div",{class:"title"},(C="Fairness Without Compromises").replace(/\s/g,"<br>")]],["td",{class:"t-1"},["div",{class:"text"},e]]]]],["div",{class:"mobile"},["div",{class:"title"},C],["div",{class:"text"},e]]];a.push(I);var k=["div",{class:"field"},["img",{src:"assets/home-gaming.png"}],["div",{class:"text"},"Gaming"]],A=["div",{class:"field"},["img",{src:"assets/home-art.png"}],["div",{class:"text"},"Art"]],T=["div",{class:"spacer"}],R=["div",{class:"s-applications"},["div",{class:"title"},"Applications"],["div",{class:"desktop"},C=["div",{class:"field"},["img",{src:"assets/home-academia.png"}],["div",{class:"text"},"Research"]],T,e=["div",{class:"field"},["img",{src:"assets/home-finance.png"}],["div",{class:"text"},"Finance"]],T,k,T,A],["div",{class:"mobile"},["div",C,T,e],["div",k,T,A]]];a.push(R);var C,S=["div",{class:"arrow"},["i",{class:"icon-angle-down"}]],F=["div",{class:"s-started"},["div",{class:"desktop"},["table",["tr",["td",{class:"t-0"},C=["div",["div",{class:"title"},"Getting Started"],["div",{class:"info"},"Chainrand provides determinstic cryptographically secure RNG SDKs ","for several languages. More languages will be added over time."],["div",{class:"sdks"},["a",{class:"lang",href:_+"/chainrand-js",target:"_blank"},["img",{src:"assets/home-lang-js.svg"}],["div",{class:"text"},"Javascript"]],["a",{class:"lang",href:_+"/chainrand-py",target:"_blank"},["img",{src:"assets/home-lang-py.svg"}],["div",{class:"text"},"Python"]],["a",{class:"lang",href:_+"/chainrand-cpp",target:"_blank"},["img",{src:"assets/home-lang-cpp.svg"}],["div",{class:"text"},"C++"]]],["div",{class:"info"},"For a more comprehensive process, checkout our demo generative NFT project. "],["div",{class:"demo"},["a",{href:_+"/chainrand-demo",target:"_blank"},"Link to Demo project ",["i",{class:"icon-link-ext"}]]]]],["td",{class:"t-1"},e=["div",{class:"process"},["div",{class:"step"},"Write off-chain determinstic RNG code with a Chainrand SDK, ","and publish it."],S,["div",{class:"step"},"Mint a Chainrand NFT to permanently tie the code to an ","unpredictable, immutable RNG seed generated with Chainlink VRF."],S,["div",{class:"step"},"Run the code, publish the results, and update the Chainrand NFT."]]]]]],["div",{class:"mobile"},C,["div",{class:"subtitle"},"The Process"],e]];a.push(F);var H=0,M=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},L=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){return window.clearTimeout(e)},U=function(){if(y<1){var e=n.width(),a=n.height();e==h&&a==m||(o.height=l=Math.max(350,.7*a),o.width=t=e,r.viewport(0,0,t,l),m=a,h=e),d[0]=t,d[1]=l,d[2]=u,d[3]=f,d[4]=H,H+=.02,r.uniform1fv(c,d),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLES,0,6)}y=(y+1)%4,w&&(v=M(U))},x=function(){s=i.find("canvas"),o=s[0],r=o.getContext("webgl");var e=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);p=e;var a=r.createShader(r.VERTEX_SHADER);r.shaderSource(a,g),r.compileShader(a);var n=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(n,b),r.compileShader(n);var t=r.createProgram();r.attachShader(t,a),r.attachShader(t,n),r.linkProgram(t),r.useProgram(t),function(e,a,n,t){var i=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,a,r.STATIC_DRAW);var s=r.getAttribLocation(e,t);return r.vertexAttribPointer(s,n,r.FLOAT,!1,0,0),r.enableVertexAttribArray(s),r.bindBuffer(r.ARRAY_BUFFER,null),i}(t,p,2,"aPos"),c=r.getUniformLocation(t,"u"),d=new Float32Array(5),s.on("mousemove",function(e){u=e.pageX,f=e.pageY})};V.add({label:"home",init:function(e){i=$(e).html(HTML(a)),n=$(window),x()},sync:function(e){},show:function(){w||(w=1,v=M(U))},hide:function(){w&&(L(v),w=0)}})}(),function(){var i,a,n,r,e=function(e,a,n,t){return["div",{class:"f-row",name:a},["div",{class:"label"},e,n?" *":"",["div",{class:"help",name:a},["div","?"]]],["div",{class:"field"},["div",{class:"error"},"Lorem Ipsum"],["input",{name:a,type:"text"}]],t?["div",{class:"description",name:a},t]:""]},t="Authorize LINK payment",s=function(e){var n={};for(var a in e)n[a]=e[a];var t,i,s=n.seedKey;delete n.seedKey,n.seedKeyHash=m((t=s,(i=sha256.create()).update(t),i.hex()));var o=function(e){var a=n[e];I(a)&&(n[e]="ipfs://"+a)};return o("codeURI"),o("imageURI"),o("projectURI"),n.codeHash=m(n.codeHash),n.payment&&(n.value=T(n.payment)),delete n.payment,n},o=["div",{class:"content"},w.ctx("mint"),["form",{class:"form"},["div",{class:"note"},"* - Required fields"],e("Name","name",1,"This is the name of your NFT. Don't worry about collisions."),e("Seed Key","seedKey",1,"This makes the off-chain RNG unpredictable. <br>Only the hash will be stored on minting. <br>After you have generated and released the results, you will need to reveal this seed key for others to verify fairness. <br>Make sure it is very strong and record it in a safe place."),e("Code Hash","codeHash",1,"This is the SHA-256 hash of the code zip in hexadecimal format."),e("Code URI","codeURI",1,"This is a permalink to the code zip. <br>For best permanace, IPFS is recommend. <br>You can use web3.storage to store the files for free."),e("Image URI","imageURI",0,"An image for your NFT. You can change this later. <br>If no image is provided, a random image will be generated on-chain."),e("Project URI","projectURI",0,"Your project's URI. You can change this later. <br>This can be an etherscan url or simply your project's website."),e(["span","Payment (",["span",{class:"currency"},"ETH"],["span",{class:"min"},", min: ",["span",{class:"amount"},"0.0"]],")"],"payment",0,"A nominal fee to prevent spam and fund development. <br>If you feel generous, you can pay more <br>so that your project will appear above others in the search."),["div",{class:"notice"},"Minting requires an additional ",["span",{name:"vrfFee"},"0.0"]," LINK ","for Chainlink VRF payment. <br>"],["button",{class:"authorize green"},t],["button",{class:"mint"},"Mint"],["div",{class:"contract-link"}]]],c=function(){var e=r.find('input[name="payment"]'),a=e.attr("min"),n=r.find('.f-row[name="payment"] .min');if("0"!=a){var t=R(a);e.val(t),n.show().find(".amount").html(t)}else n.hide(),e.val("")},d=function(e){r.find(".error").hide(),r.find("input").val(""),r.find(".help").removeClass("active"),r.find(".description").hide(),c(),B.alert("Mint submitted!"),window.location.hash="#/tokens",setTimeout(function(){D.waitTransactionMined(e,function(){V.sync()})},30)};window._onMinted=d;var l=function(){for(var e,a=G(r.serializeArray()),n=function(n){var e,t=[],a=function(e){n[e].length<1&&t.push({name:e,message:"Cannot be empty!"})},i=function(e){var a=n[e];k(a)||I(a)||t.push({name:e,message:"Must be a valid URL or CID!"})};a("name"),a("seedKey"),a("codeHash"),e=n.codeHash,/^(0x)?[0-9a-f]{64}$/i.test(e)||t.push({name:"codeHash",message:"Not a valid SHA-256 hash!"}),a("codeURI"),i("codeURI"),n.imageURI&&i("imageURI"),n.projectURI&&i("projectURI"),n.payment&&!A(n.payment)&&t.push({name:"payment",message:"Invalid amount!"});var s="0";n.payment&&A(n.payment)&&(s=n.payment),s=new Big(T(s));var o=r.find('input[name="payment"]').attr("min");return o||(o="0"),o=new Big(o),s.lt(o)&&t.push({name:"payment",message:"Insufficient amount!"}),t}(a),t=n.length-1;0<=t;t--){var i=n[t];r.find('.f-row[name="'+i.name+'"]').find(".error").html(i.message).show()}n.length<1&&(e=s(a),D.mint(e.name,e.seedKeyHash,e.codeHash,e.codeURI,e.imageURI,e.projectURI,e.value,{success:d,error:function(e){}}))},u=function(){v(a.show().off().click(h).html(t)),p(n.show())},f=function(e){e?(a.hide(),v(n.show()),n.off().click(l)):u()},h=function(){D.authorizeLink({success:f,pending:function(){p(a.html("Waiting for authorization..."))},error:function(e){u()}})};V.add({label:"mint",init:function(t){(i=$(t).html(HTML(o))).find(".help").click(function(){var e=$(this),a=e.attr("name"),n=$(t+' .description[name="'+a+'"]');e.hasClass("active")?(n.hide(),e.removeClass("active")):(n.show(),e.addClass("active"))}),i.find("form").submit(function(e){e.preventDefault()}),a=i.find(".authorize"),n=i.find(".mint"),p(a),p(n),(r=i.find("form")).find("input").each(function(){var e,a;e=$(this).attr("name"),function(a,n){for(var e="input,keydown,keyup,mousedown,mouseup,select,contextmenu,drop,change".split(","),t=0;t<e.length;++t)a.on("change",function(){var e=a.val();a.attr("_prev")!=e&&n.is(":visible")&&n.hide(),a.attr("_prev",e)})}((a=r.find('.f-row[name="'+e+'"]')).find("input"),a.find(".error"))}),w.sync("mint")},sync:function(){if(w.sync("mint"),D.chainId){D.callContract("chainrand","vrfFee",function(e){i.find('[name="vrfFee"]').html(R(e))});for(var e=0;e<g.length;++e)g[e].id==D.chainId&&i.find(".currency").html(g[e].currency)}if(D.isSignedIn()){var a={},n=0,t=function(){2==n&&(r.find('input[name="payment"]').attr("min",a.mintFee),c(),f(a.hasAuthorized))};D.callContract("chainrand","mintFee",function(e){a.mintFee=e,n++,t()}),D.checkHasAuthorizedLink(function(e){a.hasAuthorized=e,n++,t()})}!function(){var e=i.find(".contract-link");if(D.isSignedIn()){var a=D.getEtherscanLink("chainrand"),n=a.match(/\/([0-9a-fA-Fx]+)$/);n?e.html(HTML(["a",{href:a,target:"_blank"},HTML.escape("View contract ("+n[1]+")")])):e.html("")}else e.html("")}()}})}(),function(){var d,s,o,r=["div",{class:"content"},w.ctx("tokens"),["div",{class:"results"}]],a=0,c=0,l="",u=function(e){var a=["div",{class:"message"},e];d.find(".results").html(HTML(a))},f=function(){var e=$(this),o=e.attr("tokenId"),r=e.attr("name"),a=e.attr("label"),n="Change "+a,t="Save";if("seedKey"==r&&(n="Reveal Seed Key",t="Reveal"),"paid"==r){n="Pay";for(var i="",s=0;s<g.length;++s)g[s].id==D.chainId&&(i=g[s].currency);a="Amount ("+i+")",t="Pay"}var c=["div",{class:"edit-footer"},["button",{class:"light cancel"},"Cancel"],["div",{class:"spacer"}],["button",{class:"save"},t]],d=function(){var e=G($(".edit-body").serializeArray())[r],a="",n=!e,t="";"paid"==r&&(n||A(e)||(a="Invalid amount!"),A(e=n?"0":e)&&(e=T(e)),"0"==e&&(t="Are you sure you want to pay nothing? <br>You will still incur gas fees")),"URI"==r.substr(-3)&&(n?t="Are you sure you want to submit an empty value?<br>This will remove the current value.":k(e)||I(e)?I(e)&&(e="ipfs://"+e):a="Must be a valid URI or CID!");var i={success:function(e){D.waitTransactionMined(e,function(e){l="",$("html, body").animate({scrollTop:0},500),setTimeout(function(){V.sync()},600)}),B.close()},error:function(e){e.message?B.alert(e.message):B.alert("An error occured. Please reload page.")}},s=function(){"paid"==r?D.payToken(o,e,i):D.updateToken(o,r,e,i)};a?B.alert(a):t?B.confirm(t,s):s()};B({title:n,body:HTML(["form",{class:"edit-body"},["table",["tr",["td",{class:"label"},["span",a+": "]],["td",{class:"value"},["input",{type:"text",name:r}]]]]]),footer:HTML(c),beforeShow:function(){setTimeout(function(){var e=$(".edit-body .label"),a=e.find("span").width()+18;e.css("width",a),$(".edit-body .error").hide()},60)},afterShow:function(){$(".edit-body").submit(function(e){e.preventDefault(),d()});var e=$(".edit-footer");e.find(".cancel").click(B.close),e.find(".save").click(d)}})},h="id,name,codeURI,seedKey,imageURI,projectURI,minter,seedKeyHash,codeHash,randomness,paid,verified".split(","),m=function(r,e){r.verified=1==r.verified?"Yes":"No",r.paid=R(r.paid),r.openSeaURI=C(r.id,e);var c=["table"],a=function(e,a){var n=e.replace(/\s/g,"");n=n.substr(0,1).toLowerCase()+n.substr(1);var t=r[n],i="URI"==e.substr(-3);if(t||a){var s=HTML.escape(t);if(i&&t&&(s=["a",{href:t,target:"_blank"},s]),s=["div",{class:"code"},s],a){t||s.push(["span",{class:"empty"},HTML.escape("<Empty>")]);var o=["i",{class:a}];s.push({class:"editable"},["div",{class:"edit",tokenId:r.id,name:n,label:e},o])}c.push(["tr",["td",{class:"label"},e+": "],["td",{class:"value"},s]])}};return c.push(["tr",["td",{colspan:2},["div",{class:"head"},["span",{class:"id"},"#"+r.id],["span",{class:"name"},HTML.escape(r.name)]]]]),a("Verified"),a("Project URI","icon-pencil"),a("Image URI","icon-pencil"),a("Code URI","icon-pencil"),a("Code Hash"),a("Seed Key","icon-key"),a("Seed Key Hash"),a("Paid","icon-plus"),a("Randomness"),a("OpenSea URI"),c.push(["tr",["td",{colspan:2},["div",{class:"foot"},["a",{href:r.openSeaURI,target:"_blank"},"View on OpenSea",["i",{class:"icon-link-ext"}]]]]]),["div",{class:"token"},c]},v=function(){if(!c){var r=d.find(".batch[done=0]").first();if(0<r.length){c=1;var e=r.attr("batchIds").split(",");D.callContract("chainrand","tokenData",e,function(e){c=0,r.attr("done","1");for(var a=r.attr("chainId"),n=h.length,t=["div"],i=0;i<e.length;i+=n){for(var s={},o=0;o<n;++o)s[h[o]]=e[i+o];t.push(m(s,a))}r.html(HTML(t)).find(".edit").click(f)})}}},p=function(){if(a){var e=s.scrollTop();o.height()-s.height()-e<500&&v()}};window._fx=function(){window._onMinted("0x7e05cc3ad782da6cf5aa38195d8f91080e6f967f4799dc5a2c2098daef41b3ac")},window._ret=v;V.add({label:"tokens",init:function(e){var a,n,t,i;d=$(e).html(HTML(r)),w.sync("tokens"),s=$(window),o=$("body"),s.scroll((a=p,n=300,t=0,i=function(){t=0,a()},function(){t||(t=1,setTimeout(i,n))}))},sync:function(e){D.isSignedIn()?(u("Loading..."),D.callContract("chainrand","tokensOfOwner",D.walletAddress,function(e){!function(e,a,n){if(e.length<1)u("Wallet has no tokens.");else{var t=e.join(",")+"/"+a+"/"+n;if(t!=l){for(var i=["div",{class:"batches"}],s=e.length,o=0;o<s;o+=5){for(var r=[],c=0;c<5&&o+c<s;++c)r.push(e[s-1-(o+c)]);i.push(["div",{class:"batch",batchIds:r.join(","),id:y(),walletAddress:a,chainId:n,done:"0"}])}l=t,d.find(".results").html(HTML(i)),v()}}}(e,D.walletAddress,D.chainId)})):u("Not connected."),w.sync("tokens")},show:function(){a=1},hide:function(){a=0}})}(),j=["div",{class:"content"},["form",{class:"form"},["div",{class:"params"},["div",{class:"type"},["name","minter"],function(e){var a=y();return["span",{class:"radio"},["input",{type:"radio",id:a,value:e,name:"type"}],["div",{class:"check"},["div"]],["label",{for:a},b(e)]]}],["div",{class:"chain"},["select",{name:"chain"},g,function(e){return e.supported?["option",{value:e.id},b(e.name)]:""}]]],["div",{class:"query"},["input",{type:"text",name:"query"}]],["div",{class:"search"},["button","Search"],["input",{type:"submit"}]]],["div",{class:"results"}]],E=function(){z.find(".results").html(HTML(["div",{class:"message"},"No results."]))},N=0,K=function(a,n){var t=5,i=++N,s=function(){if(D.config){var e=["div",a,function(e){return function(r,e){r.verified=1==r.verified?"Yes":"No",r.paid=R(r.paid),r.openSeaURI=C(r.id,e);var c=["table"],a=function(e,a){var n=e.replace(/\s/g,"");n=n.substr(0,1).toLowerCase()+n.substr(1);var t=r[n],i="URI"==e.substr(-3);if(t||a){var s=HTML.escape(t);if(i&&t&&(s=["a",{href:t,target:"_blank"},s]),s=["div",{class:"code"},s],a){t||s.push(["span",{class:"empty"},HTML.escape("<Empty>")]);var o=["i",{class:a}];s.push({class:"editable"},["div",{class:"edit",tokenId:r.id},o])}c.push(["tr",["td",{class:"label"},e+": "],["td",{class:"value"},s]])}};return c.push(["tr",["td",{colspan:2},["div",{class:"head"},["span",{class:"id"},"#"+r.id],["span",{class:"name"},HTML.escape(r.name)]]]]),a("Minter"),a("Verified"),a("Project URI"),a("Image URI"),a("Code URI"),a("Code Hash"),a("Seed Key"),a("Seed Key Hash"),a("Randomness"),c.push(["tr",["td",{colspan:2},["div",{class:"foot"},["a",{href:r.openSeaURI,target:"_blank"},"View on OpenSea",["i",{class:"icon-link-ext"}]]]]]),["div",{class:"token"},c]}(e,n)}];i==N&&z.find(".results").html(HTML(e))}else 0<t?(t--,setTimeout(s,500)):E()};s()},V.add({label:"search",init:function(e){(z=$(e).html(HTML(j))).find('.type input[type="radio"]').first().prop("checked",!0),P=z.find("form").submit(function(e){e.preventDefault();var a,n,t=$(this);a=G(t.serializeArray()),n="#/search/"+a.chain+"/"+a.type+"/"+encodeURIComponent(a.query),window.location.hash=n})},sync:function(){D.chainId&&z.find(".chain select").val(D.chainId)},show:function(){var e=window.location.hash.match(/^(?:#\/)?search\/(\d+)\/([^\/]+)\/(.*)$/i);if(e){var a={},n=decodeURIComponent(e[3]),t=e[2].toLowerCase(),i=e[1];a[t]=n,a.c=i,P.find('input[name="query"]').val(n),P.find('select[name="chain"]').val(i),P.find('input[name="type"]').each(function(){$(this).attr("value")==t&&$(this).prop("checked",t)}),$.ajax({url:"api",type:"GET",data:a,success:function(e){e.tokens&&0<e.tokens.length?K(e.tokens,i):E()}})}}}),$(function(){V.init(),$.ajax({url:"contracts/config.json",success:function(e){D.config=e;var a=function(){V.sync()};q(D,{success:a,error:a})}})})}();
