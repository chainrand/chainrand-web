!function(){var e,s,o,n,a,t,r,g=[{name:"mainnet",currency:"ETH",id:1,supported:!1},{name:"rinkeby",currency:"ETH",id:4,supported:!0},{name:"polygon",currency:"MATIC",id:137,supported:!1},{name:"mumbai",currency:"MATIC",id:80001,supported:!0}],z="https://github.com/chainrand",b=0,m=function(e){var n=function(e,n){var a=0,t=[];for(e=e.slice(),n=n.slice();e.length||n.length;){var i=(e.pop()||0)+(n.pop()||0)+a;t.unshift(i<10?i:i-10),a=i<10?0:1}return a&&t.unshift(a),t};if(e=e.trim(),/^(0x)?[0-9a-f]+$/i.test(e)){for(var a=[0],t=0;t<e.length;++t)for(var i=parseInt(e.charAt(t),16),s=8;s;s>>=1)a=n(a,a),i&s&&(a=n(a,[1]));return a.join("")}return null},i=navigator.userAgent,y=(i.match(/Linux/i)&&i.match(/Android/i)&&i.match(/Mozilla/i)&&i.match(/AppleWebKit/i)&&i.match(/Chrome/i),i.match(/iPhone|iPad|iPod/i)&&i.match(/AppleWebKit/),i.match(/iPad|iPhone|Android|BlackBerry|webOS|Mobile/i)&&(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone),function(e){return(e=""+e).charAt(0).toUpperCase()+e.slice(1)}),w=(s=(e||"1").split(""),o="0123456789abcdefghijklmnopqrstuvwxyz",n=function(e){for(var n=0<e?1:-1,a=Math.abs(e);a--;)for(var t=s.length;t--;){var i=o.indexOf(s[t])+n;i<o.length?(s[t]=o.charAt(i),t=0):(s[t]="0",t||(s.unshift("1"),t=0))}return s.join("")},function(){return"elId_"+n(1)}),I=(t={},r=function(e){return t[e]||(t[e]=w()),t[e]},(a={}).ctx=function(e){return["div",{class:"wallet",id:r(e)}]},a.sync=function(e){var n=r(e),a=q.walletAddress,t=["div",{class:"info"}];if(a?a=["span",["i",{class:"icon-link"}]," ",a="0x"+(a.substr(2,6)+"..."+a.substr(-6)).toUpperCase()]:q.chainUnsupported?a=["span",["i",{class:"icon-attention"}]]:(a=["span",["i",{class:"icon-login"}]," Connect Wallet "],t.push({class:"unconnected"})),t.push(["span",{class:"address"},a]),q.chainId){for(var i="",s=0;s<g.length;++s)g[s].id==q.chainId&&(i=g[s].name);t.push(["span",{class:"c-chain"}," (",["span",{class:"chain"},y(i)],")"])}else q.chainUnsupported&&t.push(["span",{class:"c-chain"}," Chain Unsupported!"]);$("#"+n).html(HTML(t)).find(".info").click(function(){q.walletAddress||q.chainUnsupported||q.signIn(function(){Y.sync()})})},a),k=function(e){return/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})$/.test(e)},A=function(e){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},T=function(e){return/^(0?\.0*?[0-9]*|[1-9][0-9]*\.?[0-9]+|0)$/.test(e)},c=new Big("1000000000000000000"),R=function(e){try{return new Big(""+e).mul(c)+""}catch(e){return""}},C=function(e){try{return new Big(""+e).div(c)+""}catch(e){return""}},v=function(e){e.removeAttr("disabled")},p=function(e){e.attr("disabled","disabled")},S=function(e,n){var a,t="",i="https://opensea.io/assets",s="https://testnets.opensea.io/assets";if((1==a?t=i:4==n?t=s:137==n?t=i+"/matic":80001==n&&(t=s+"/mumbai"),t)&&((a=q.config)&&(a=a.chainrand)&&(a=a.addresses)&&(a=a[n])))return t+"/"+a+"/"+e;return""},d=function(e){if("string"==typeof e||f.constructor==String)return 0<e.length};$(function(){var a=B.alert;B.alert=function(e){a({body:HTML(["div",{class:"alert-body"},e]),footer:HTML(["div",{class:"alert-footer"},["button",{class:"ok light"},"Ok"]]),afterShow:function(){$(".alert-footer .ok").click(function(){a.close()})}})},B.confirm=function(e,n){a({body:HTML(["div",{class:"alert-body"},e]),footer:HTML(["div",{class:"alert-footer"},["button",{class:"cancel light"},"Cancel"],["div",{class:"spacer"}],["button",{class:"ok"},"Ok"]]),afterShow:function(){$(".alert-footer .ok").click(function(){a.close(),n()}),$(".alert-footer .cancel").click(function(){a.close()})}})}});var l,u,h,F,H,M,L,U,x,_,P,j,N,E,K,G,O=function(e){var n,a={};for(var t in e){var i=e[t].value;d(i)&&(n=i,i=String.prototype.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),a[e[t].name]=i}return a},B=(l="modal"+(Math.random()+"").substr(3),u=function(e){var n=$("#"+l);if(n.length<1){var a=HTML.SVG,t=a.Path,i=a(18,18,t.M(0,0).L(18,18),t.M(0,18).L(18,0)),s=["div",{class:"modal",id:l},["div",{class:"modal-dialog"},["div",{class:"modal-content"},["div",{class:"modal-header"},["div",{class:"modal-close"},i],["div",{class:"modal-title"}]],["div",{class:"modal-body"}],["div",{class:"modal-footer"}]]],["div",{class:"modal-overlay"}]];$("body").append(HTML(s)),n=$("#"+l)}"title"in e?n.find(".modal-title").html(e.title).show():n.find(".modal-title").hide(),"body"in e?n.find(".modal-body").html(e.body).show():n.find(".modal-body").hide(),"footer"in e?n.find(".modal-footer").html(e.footer).show():n.find(".modal-footer").hide(),u.close=function(){u.active=0,n.removeClass("active"),$("body").removeClass("modal-shown-body"),setTimeout(function(){u.active||n.hide()},300)},u.hide=u.close,u.active=1,"beforeShow"in e&&$.isFunction(e.beforeShow)&&e.beforeShow(),n.show(),setTimeout(function(){n.addClass("active"),n.find(".modal-close").click(u.close),n.find(".modal-overlay").click(u.close),"afterShow"in e&&$.isFunction(e.afterShow)&&setTimeout(e.afterShow,300),$("body").addClass("modal-shown-body")},10)},h="alert"+(Math.random()+"").substr(3),F=function(e){var n=$("#"+h);if(n.length<1){var a=["div",{class:"modal-alert",id:h},["div",{class:"modal-dialog"},["div",{class:"modal-content"},["div",{class:"modal-body"}],["div",{class:"modal-footer"}]]],["div",{class:"modal-overlay"}]];$("body").append(HTML(a)),n=$("#"+h)}"body"in e?n.find(".modal-body").html(e.body).show():n.find(".modal-body").hide(),"footer"in e?n.find(".modal-footer").html(e.footer).show():n.find(".modal-footer").hide(),F.close=function(){F.active=0,n.removeClass("active"),$("body").removeClass("modal-alert-shown-body"),setTimeout(function(){F.active||n.hide()},300)},F.hide=F.close,F.active=1,"beforeShow"in e&&$.isFunction(e.beforeShow)&&e.beforeShow(),n.show(),setTimeout(function(){n.addClass("active"),n.find(".modal-close").click(F.close),n.find(".modal-overlay").click(F.close),"afterShow"in e&&$.isFunction(e.afterShow)&&setTimeout(e.afterShow,300),$("body").addClass("modal-alert-shown-body")},10)},u.alert=F,u),D=103,q={walletAddress:null,config:null,contracts:null},V=function(l,n){for(var e in l.contracts={},l.config)for(var a in l.contracts[e]={},l.config[e])l.contracts[e][a]=null;var i=function(e,n){var a="crls_"+e,t=window.localStorage.getItem(a);return null===t?(window.localStorage.setItem(a,n),n):t},s=function(e,n){var a="crls_"+e;window.localStorage.setItem(a,n)},d=function(e,n){for(var a=e?e[n]:null,t=[],i=2;i<arguments.length;++i)t.push(arguments[i]);$.isFunction(a)?a.apply(void 0,t):"success"==n&&$.isFunction(e)&&e.apply(void 0,t)};void 0!==window.ethereum&&(l.web3=new Web3(window.ethereum));var t=function(e){for(var n in l.config)if(!l.config[n].addresses[e])return!1;return!0},u=function(n,e){return{success:e,error:function(e){d(n,"error",e)}}},f=function(n){l.web3?l.web3.eth.net.getId().then(function(e){t(e)?(l.chainId=e,l.chainUnsupported=0,d(n,"success",e)):(l.chainId=null,l.walletAddress=null,l.chainUnsupported=1,d(n,"error",{code:102}))}).catch(function(e){l.chainId=null,l.walletAddress=null,l.chainUnsupported=0,d(n,"error",{code:101})}):(l.chainId=null,l.walletAddress=null,l.chainUnsupported=0,d(n,"error",{code:101}))},h=function(n,a){f(u(n,function(e){l.chainId=e,(a?l.web3.eth.getAccounts():window.ethereum.request({method:"eth_requestAccounts"})).then(function(e){l.walletAddress=e[0],d(n,"success",l.walletAddress)}).catch(function(e){l.walletAddress=null,d(n,"error",{code:105})})}))},m=function(e){h(e,1)},o=function(){return null!==l.walletAddress&&null!==l.chainId},v=function(n){var e=arguments,a=e.length,t=e[a-1],i=2<a?e[1]:"",s=[];if(3<a)for(var o=2;o<a-1;++o)s.push(e[o]);var r=n.split("!");n=r[0];var c=u(t,function(e){if(l.contracts[n][e]||(l.contracts[n][e]=new l.web3.eth.Contract(l.config[n].abi,l.config[n].addresses[e])),""==i)d(t,"success",l.contracts[n][e]);else try{l.contracts[n][e].methods[i].apply(void 0,s).call().then(function(e){d(t,"success",e)}).catch(function(e){d(t,"error",{code:D})})}catch(e){d(t,"error",{code:D})}});1<r.length?m(u(c,function(){l.isSignedIn()?d(c,"success",l.chainId):h(u(c,function(){l.walletAddress&&l.chainId?d(c,"success",l.chainId):d(c,"error",{code:101})}))})):f(c)},r="authorizeLinkPending",c=function(e){var n=i(r,{});delete n[e],s(r,n)},p=function(a,t){l.web3.eth.getTransactionReceipt(a,function(e,n){e||(null==n?setTimeout(function(){p(a,t)},5e3):d(t,"success",n.status))})},g=function(n,a,t){n.estimateGas(a).then(function(e){a.gas=e,n.send(a).on("transactionHash",function(e){d(t,"success",e)}).catch(function(e){d(t,"error",{code:D,message:"Transaction failed."})})}).catch(function(e){d(t,"error",{code:D,message:function(e){var n=""+((l.ethError=e)?e.message:"");if(/insufficient/i.test(n))return"Insufficient funds for payment and gas fees.";try{var a,t=JSON.parse(n.substr(n.indexOf("{")));return((a=t.originalError)&&(a=a.message)||(a=t.message))&&(t=a.replace(/^[^:]+:\s*/,"")),t}catch(e){return"Transaction failed."}}(e)})})};l.getEtherscanLink=function(e){var n,a="";if(80001==l.chainId&&(a="https://mumbai.polygonscan.com/address/"),1==l.chainId&&(a="https://etherscan.io/address/"),4==l.chainId&&(a="https://rinkeby.etherscan.io/address/"),137==l.chainId&&(a="https://polygonscan.com/address/"),l.chainId&&(n=l.config[e])&&(n=n.addresses)&&(n=n[l.chainId]))return a+n;return""},l.signIn=h,l.silentSignIn=m,l.chainIsSupported=t,l.callContract=v,l.authorizeLink=function(t){v("chainlink!",u(t,function(e){var n=l.config.chainrand.addresses[l.chainId],a=e.methods.approve(n,"100000000000000000000000000");g(a,{from:l.walletAddress},u(t,function(n){var e,a;d(t,"pending",n),e=n,(a=i(r,{}))[e]={walletAddress:l.walletAddress,chainId:l.chainId},s(r,a),p(n,function(e){c(n),d(t,"success",e)})}))}))},l.checkHasAuthorizedLink=function(a){v("chainlink!","allowance",l.walletAddress,l.config.chainrand.addresses[l.chainId],u(a,function(e){if("0"!=(e=""+e))d(a,"success",!0);else{var n=function(){var e=i(r,{});for(var n in e){var a=e[n];if(a.walletAddress==l.walletAddress&&a.chainId==l.chainId)return n}return null}();n?(d(a,"pending"),p(n,function(e){c(n),d(a,"success",e)})):d(a,"success",!1)}}))},l.waitTransactionMined=p,l.mint=function(a,t,i,s,o,r,c,d){v("chainrand!",u(d,function(e){var n=e.methods.mint(a,t,i,s,o,r);g(n,{from:l.walletAddress,value:c},d)}))},l.updateToken=function(a,e,t,i){var s="set"+y(e);v("chainrand!",u(i,function(e){var n=e.methods[s](a,t);g(n,{from:l.walletAddress},i)}))},l.payToken=function(a,t,i){v("chainrand!",u(i,function(e){var n=e.methods.pay(a);g(n,{from:l.walletAddress,value:t},i)}))},l.isSignedIn=o,window.ethereum.on("accountsChanged",function(e){m(n)}),window.ethereum.on("networkChanged",function(e){m(n)}),window.ethereum.on("chainChanged",function(e){m(n)}),m(n)},Y=(M=[],L=["div",{id:"pages"}],U=[],_=!(x=function(e,n){for(var a=e?e[n]:null,t=[],i=2;i<arguments.length;++i)t.push(arguments[i]);$.isFunction(a)&&a.apply(void 0,t)}),(H={}).add=function(a){a.path=a.label.replace(/\s+/g,"-").toLowerCase(),a.synced=!1,a.inited=!1,a.visible=!1,a.sel='#pages .page[path="'+a.path+'"]',M.push(a),L.push(["div",{class:"page",path:a.path}]),U.push(["a",{href:"#/"+a.path},y(a.label)]),HTML.route(a.path,function(){for(var e=0;e<M.length;++e){var n=M[e];n.path==a.path?(n.visible=!0,n.inited||(x(n,"init",n.sel),n.inited=!0),$(n.sel).show(),x(n,"show",n.sel),_&&(n.synced||(x(n,"sync",n.sel),n.synced=!0))):($(n.sel).hide(),x(n,"hide",n.sel),n.visible=!1)}})},H.init=function(){var e=["div",{id:"navbar"},["div",{class:"desktop"},["table",["tr",["td",{class:"c-logo"},["a",{href:"#/home"},["img",{src:"assets/nav_logo.png"}]]],["td",{class:"c-links"},U],["td",{class:"c-s0cial"},""]]]],["div",{class:"mobile"},["table",["tr",["td",{class:"c-hamburger"},["div",{class:"hamburger"},["div",{class:"l-0"}],["div",{class:"l-1"}],["div",{class:"l-2"}]]],["td",{class:"c-logo"},["img",{src:"assets/nav_logo.png"}]],["td",{class:"c-right"}]]]],["div",{class:"slider"},["div",{class:"c-links"},U],["div",{class:"c-s0cial"},""],["div",{class:"bg"}],["div",{class:"overlay"}]]];$("body").html(HTML([e,L])),HTML.route.go(":home"),function(){var t=0;$("#navbar .slider").hide(),$("#navbar .hamburger").click(function(){if(!t){t=1;var e=$(this),n=$("#navbar .slider"),a=n.find("a");e.hasClass("active")?(setTimeout(function(){$("#navbar").removeClass("slided")},200),e.removeClass("active"),n.removeClass("active"),a.each(function(e,n){setTimeout(function(){n.style.opacity=0},Math.max(0,30*(a.length-3-e)))}),setTimeout(function(){t=0,n.hide()},700)):(n.show(),setTimeout(function(){e.addClass("active"),n.addClass("active"),a.each(function(e,n){setTimeout(function(){n.style.opacity=1},60*e)}),setTimeout(function(){t=0},500)},15),$("#navbar").addClass("slided"))}});var a=function(){t?setTimeout(a,60):$("#navbar .hamburger").click()};$("#navbar .slider a, #navbar .slider .overlay").click(function(){var e=$(this).attr("href"),n=$(this).attr("target");e&&"#"!=(""+e).substr(0,1)&&"_blank"!=n||a()})}()},H.sync=function(){_=!0;for(var e=0;e<M.length;++e){var n=M[e];n.visible?(x(n,"sync",n.sel),n.synced=!0):n.synced=!1}},H);!function(){var i,t,s,o,r,c,d,l,u,f,h,m,v,p,g,b,y=["#ifdef GL_ES","precision mediump float;","#endif","attribute vec2 aPos;","void main() {","gl_Position = vec4(aPos, 0.0, 1.0);","}"].join("\n"),w=["// Author @patriciogv - 2015","// Title: DeFrag","// Adapted from https://thebookofshaders.com/edit.php#10/ikeda-04.frag","#ifdef GL_ES","precision mediump float;","#endif","uniform float u[5];","float random (float x) { return fract(sin(x)*1e4); }","float random (vec2 _st) { return fract(sin(dot(_st.xy, vec2(12.9898,78.233)))* 43758.5453123);}","void main() {","vec2 u_resolution = vec2(u[0], u[1]);","vec2 u_mouse = vec2(u[2], u[3]);","float u_time = u[4];","vec2 st = gl_FragCoord.xy/u_resolution.xy;","st.x *= u_resolution.x/u_resolution.y;","vec2 grid = vec2(100.0,100.0);","st *= grid;","vec2 ipos = floor(st);","vec2 vel = vec2(u_time*10.);","vel *= vec2(-1.,0.);","vel *= (step(1., mod(ipos.y,2.0))-0.5)*2.; // Opposite directions","vel *= random(ipos.y); // random speed","vec3 color = vec3(1.0);","color *= step(grid.y,ipos.y);","color += step(0.0,ipos.y);","color = clamp(color,vec3(0.),vec3(1.));","float fadeFactor = abs(u_mouse.y/u_resolution.y-0.5);","fadeFactor = fadeFactor + abs(u_mouse.x/u_resolution.x-0.5);","fadeFactor = 0.5 + clamp(fadeFactor * 0.5, 0.1, 0.5) * 0.5;","color *= random(floor(st+vel));","color = smoothstep(0.0, fadeFactor, color*color);","color = step(fadeFactor,color); // threshold","// Margin","float margin = 0.2;","color *= step(margin,fract(st.x+vel.x))*step(margin,fract(st.y+vel.y));","gl_FragColor = vec4(1.90-color,1.0);","}"].join("\n"),I=0,k=0,n=["div",["div",{class:"splash"},["canvas",{class:"bg"}],["div",{class:"front"},["div",{class:"title"},"Fair Randomness Anywhere"],["div",{class:"tagline"},"Generate verifiable random numbers efficiently without limits"],["div",{class:"buttons"},["a",{class:"mint",href:"#/mint"},["div","Mint"],["div",{class:"b-0"}],["div",{class:"b-1"}]],["div",{class:"spacer"}],["a",{class:"github",href:z,target:"_blank"},["div","Github"],["div",{class:"b-0"}],["div",{class:"b-1"}]]]]]],e=["div",["p","Random number generators are prevalent in our everyday lives. "],["p","It is important for RNGs to be unbiased and incorruptible."],["p","However, RNG seeds can be cherry-picked to achieve ","unfair outcomes in subtle ways. ","This is a common problem in many fields ","known as Statistical P-Hacking, ","which is very hard to detect, or disprove."],["p","With Chainrand, it is now easy to use ","Chainlink Verifiable Random Functions ","for flexible, efficient computations in off-chain code ","in a verfiably fair way. "]],a=["div",{class:"s-intro"},["div",{class:"desktop"},["table",["tr",["td",{class:"t-0"},["div",{class:"title"},(S="Fairness Without Compromises").replace(/\s/g,"<br>")]],["td",{class:"t-1"},["div",{class:"text"},e]]]]],["div",{class:"mobile"},["div",{class:"title"},S],["div",{class:"text"},e]]];n.push(a);var A=["div",{class:"field"},["img",{src:"assets/home-gaming.png"}],["div",{class:"text"},"Gaming"]],T=["div",{class:"field"},["img",{src:"assets/home-art.png"}],["div",{class:"text"},"Art"]],R=["div",{class:"spacer"}],C=["div",{class:"s-applications"},["div",{class:"title"},"Applications"],["div",{class:"desktop"},S=["div",{class:"field"},["img",{src:"assets/home-academia.png"}],["div",{class:"text"},"Research"]],R,e=["div",{class:"field"},["img",{src:"assets/home-finance.png"}],["div",{class:"text"},"Finance"]],R,A,R,T],["div",{class:"mobile"},["div",S,R,e],["div",A,R,T]]];n.push(C);var S,F=["div",{class:"arrow"},["i",{class:"icon-angle-down"}]],H=["div",{class:"s-started"},["div",{class:"desktop"},["table",["tr",["td",{class:"t-0"},S=["div",["div",{class:"title"},"Getting Started"],["div",{class:"info"},"Chainrand provides determinstic cryptographically secure RNG SDKs ","for several languages. More languages will be added over time."],["div",{class:"sdks"},["a",{class:"lang",href:z+"/chainrand-js",target:"_blank"},["img",{src:"assets/home-lang-js.svg"}],["div",{class:"text"},"Javascript"]],["a",{class:"lang",href:z+"/chainrand-py",target:"_blank"},["img",{src:"assets/home-lang-py.svg"}],["div",{class:"text"},"Python"]],["a",{class:"lang",href:z+"/chainrand-cpp",target:"_blank"},["img",{src:"assets/home-lang-cpp.svg"}],["div",{class:"text"},"C++"]]],["div",{class:"info"},"For a more comprehensive process, checkout our demo generative NFT project. "],["div",{class:"demo"},["a",{href:z+"/chainrand-demo",target:"_blank"},"Link to Demo project ",["i",{class:"icon-link-ext"}]]]]],["td",{class:"t-1"},e=["div",{class:"process"},["div",{class:"step"},"Write off-chain determinstic RNG code with a Chainrand SDK, ","and publish it."],F,["div",{class:"step"},"Mint a Chainrand NFT to permanently tie the code to an ","unpredictable, immutable RNG seed generated with Chainlink VRF."],F,["div",{class:"step"},"Run the code, publish the results, and update the Chainrand NFT."]]]]]],["div",{class:"mobile"},S,["div",{class:"subtitle"},"The Process"],e],["div",{class:"bg"}]];n.push(H);var M=0,L=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},U=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){return window.clearTimeout(e)},x=function(){if(I<1){var e=t.width(),n=t.height();if(e!=v||n!=p){f=Math.max(350,.7*n),u=e;var a=o.height();f=Math.max(f,1.28*a),r.height=f,r.width=u,c.viewport(0,0,u,f),p=n,v=e}l[0]=u,l[1]=f,l[2]=h,l[3]=m,l[4]=M,M+=.02,c.uniform1fv(d,l),c.clear(c.COLOR_BUFFER_BIT),c.drawArrays(c.TRIANGLES,0,6)}I=(I+1)%4,k&&(g=L(x))},_=function(){s=i.find("canvas"),o=i.find(".splash .front"),r=s[0],c=r.getContext("webgl");var e=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);b=e;var n=c.createShader(c.VERTEX_SHADER);c.shaderSource(n,y),c.compileShader(n);var a=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(a,w),c.compileShader(a);var t=c.createProgram();c.attachShader(t,n),c.attachShader(t,a),c.linkProgram(t),c.useProgram(t),function(e,n,a,t){var i=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,i),c.bufferData(c.ARRAY_BUFFER,n,c.STATIC_DRAW);var s=c.getAttribLocation(e,t);return c.vertexAttribPointer(s,a,c.FLOAT,!1,0,0),c.enableVertexAttribArray(s),c.bindBuffer(c.ARRAY_BUFFER,null),i}(t,b,2,"aPos"),d=c.getUniformLocation(t,"u"),l=new Float32Array(5),s.on("mousemove",function(e){h=e.pageX,m=e.pageY})};Y.add({label:"home",init:function(e){i=$(e).html(HTML(n)),t=$(window),_()},sync:function(e){},show:function(){k||(k=1,g=L(x))},hide:function(){k&&(U(g),k=0)}})}(),function(){var i,n,a,r,e=function(e,n,a,t){return["div",{class:"f-row",name:n},["div",{class:"label"},e,a?" *":"",["div",{class:"help",name:n},["div","?"]]],["div",{class:"field"},["div",{class:"error"},"Lorem Ipsum"],["input",{name:n,type:"text"}]],t?["div",{class:"description",name:n},t]:""]},t="Authorize LINK payment",s=function(e){var a={};for(var n in e)a[n]=e[n];var t,i,s=a.seedKey;delete a.seedKey,a.seedKeyHash=m((t=s,(i=sha256.create()).update(t),i.hex()));var o=function(e){var n=a[e];k(n)&&(a[e]="ipfs://"+n)};return o("codeURI"),o("imageURI"),o("projectURI"),a.codeHash=m(a.codeHash),a.payment&&(a.value=R(a.payment)),delete a.payment,a},o=["div",{class:"content"},I.ctx("mint"),["form",{class:"form"},["div",{class:"note"},"* - Required fields"],e("Name","name",1,"This is the name of your NFT. Don't worry about collisions."),e("Seed Key","seedKey",1,"This makes the off-chain RNG unpredictable. <br>Only the hash will be stored on minting. <br>After you have generated and released the results, you will need to reveal this seed key for others to verify fairness. <br>Make sure it is very strong and record it in a safe place."),e("Code Hash","codeHash",1,"This is the SHA-256 hash of the code zip in hexadecimal format."),e("Code URI","codeURI",1,"This is a permalink to the code zip. <br>For best permanace, IPFS is recommend. <br>You can use web3.storage to store the files for free."),e("Image URI","imageURI",0,"An image for your NFT. You can change this later. <br>If no image is provided, a random image will be generated on-chain."),e("Project URI","projectURI",0,"Your project's URI. You can change this later. <br>This can be an etherscan url or simply your project's website."),e(["span","Payment (",["span",{class:"currency"},"ETH"],["span",{class:"min"},", min: ",["span",{class:"amount"},"0.0"]],")"],"payment",0,"A nominal fee to prevent spam and fund development. <br>If you feel generous, you can pay more <br>so that your project will appear above others in the search."),["div",{class:"notice"},"Minting requires an additional ",["span",{name:"vrfFee"},"0.0"]," LINK ","for Chainlink VRF payment. <br>"],["button",{class:"authorize green"},t],["button",{class:"mint"},"Mint"],["div",{class:"contract-link"}]]],c=function(){var e=r.find('input[name="payment"]'),n=e.attr("min"),a=r.find('.f-row[name="payment"] .min');if("0"!=n){var t=C(n);e.val(t),a.show().find(".amount").html(t)}else a.hide(),e.val("")},d=function(e){r.find(".error").hide(),r.find("input").val(""),r.find(".help").removeClass("active"),r.find(".description").hide(),c(),B.alert("Mint submitted. <br>The tokens page will auto-refresh."),window.location.hash="#/tokens",setTimeout(function(){q.waitTransactionMined(e,function(){var a,t,i;b++,a=0,t=-1,i=function(){q.isSignedIn()&&q.callContract("chainrand","balanceOf",q.walletAddress,function(n){0<=(n=parseInt(n,10)-1)&&q.isSignedIn()&&q.callContract("chainrand","tokens",n,function(e){"0"!=e.randomness+""&&(a++,t!=n&&(b++,Y.sync(),t=n)),a<2&&setTimeout(i,3e4)})})},setTimeout(i,15e3),Y.sync()})},30)};window._onMinted=d;var l=function(){for(var e,n=O(r.serializeArray()),a=function(a){var e,t=[],n=function(e){a[e].length<1&&t.push({name:e,message:"Cannot be empty!"})},i=function(e){var n=a[e];A(n)||k(n)||t.push({name:e,message:"Must be a valid URL or CID!"})};n("name"),n("seedKey"),n("codeHash"),e=a.codeHash,/^(0x)?[0-9a-f]{64}$/i.test(e)||t.push({name:"codeHash",message:"Not a valid SHA-256 hash!"}),n("codeURI"),i("codeURI"),a.imageURI&&i("imageURI"),a.projectURI&&i("projectURI"),a.payment&&!T(a.payment)&&t.push({name:"payment",message:"Invalid amount!"});var s="0";a.payment&&T(a.payment)&&(s=a.payment),s=new Big(R(s));var o=r.find('input[name="payment"]').attr("min");return o||(o="0"),o=new Big(o),s.lt(o)&&t.push({name:"payment",message:"Insufficient amount!"}),t}(n),t=a.length-1;0<=t;t--){var i=a[t];r.find('.f-row[name="'+i.name+'"]').find(".error").html(i.message).show()}a.length<1&&(e=s(n),q.mint(e.name,e.seedKeyHash,e.codeHash,e.codeURI,e.imageURI,e.projectURI,e.value,{success:d,error:function(e){}}))},u=function(){v(n.show().off().click(h).html(t)),p(a.show())},f=function(e){e?(n.hide(),v(a.show()),a.off().click(l)):u()},h=function(){q.authorizeLink({success:f,pending:function(){p(n.html("Waiting for authorization..."))},error:function(e){u()}})};Y.add({label:"mint",init:function(t){(i=$(t).html(HTML(o))).find(".help").click(function(){var e=$(this),n=e.attr("name"),a=$(t+' .description[name="'+n+'"]');e.hasClass("active")?(a.hide(),e.removeClass("active")):(a.show(),e.addClass("active"))}),i.find("form").submit(function(e){e.preventDefault()}),n=i.find(".authorize"),a=i.find(".mint"),p(n),p(a),(r=i.find("form")).find("input").each(function(){var e,n;e=$(this).attr("name"),function(n,a){for(var e="input,keydown,keyup,mousedown,mouseup,select,contextmenu,drop,change".split(","),t=0;t<e.length;++t)n.on("change",function(){var e=n.val();n.attr("_prev")!=e&&a.is(":visible")&&a.hide(),n.attr("_prev",e)})}((n=r.find('.f-row[name="'+e+'"]')).find("input"),n.find(".error"))}),I.sync("mint")},sync:function(){if(I.sync("mint"),q.chainId){q.callContract("chainrand","vrfFee",function(e){i.find('[name="vrfFee"]').html(C(e))});for(var e=0;e<g.length;++e)g[e].id==q.chainId&&i.find(".currency").html(g[e].currency)}if(q.isSignedIn()){var n={},a=0,t=function(){2==a&&(r.find('input[name="payment"]').attr("min",n.mintFee),c(),f(n.hasAuthorized))};q.callContract("chainrand","mintFee",function(e){n.mintFee=e,a++,t()}),q.checkHasAuthorizedLink(function(e){n.hasAuthorized=e,a++,t()})}!function(){var e=i.find(".contract-link");if(q.isSignedIn()){var n=q.getEtherscanLink("chainrand"),a=n.match(/\/([0-9a-fA-Fx]+)$/);a?e.html(HTML(["a",{href:n,target:"_blank"},HTML.escape("View contract ("+a[1]+")")])):e.html("")}else e.html("")}()}})}(),function(){var l,s,o,r=["div",{class:"content"},I.ctx("tokens"),["div",{class:"results"}]],n=0,c=0,u="",f=function(e){var n=["div",{class:"message"},e];l.find(".results").html(HTML(n))},d=function(){var e=$(this),o=e.attr("tokenId"),r=e.attr("name"),n=e.attr("label"),a="Change "+n,t="Save";if("seedKey"==r&&(a="Reveal Seed Key",t="Reveal"),"paid"==r){a="Pay";for(var i="",s=0;s<g.length;++s)g[s].id==q.chainId&&(i=g[s].currency);n="Amount ("+i+")",t="Pay"}var c=["div",{class:"edit-footer"},["button",{class:"light cancel"},"Cancel"],["div",{class:"spacer"}],["button",{class:"save"},t]],d=function(){var e=O($(".edit-body").serializeArray())[r],n="",a=!e,t="";"paid"==r&&(a||T(e)||(n="Invalid amount!"),T(e=a?"0":e)&&(e=R(e)),"0"==e&&(t="Are you sure you want to pay nothing? <br>You will still incur gas fees")),"URI"==r.substr(-3)&&(a?t="Are you sure you want to submit an empty value?<br>This will remove the current value.":A(e)||k(e)?k(e)&&(e="ipfs://"+e):n="Must be a valid URI or CID!");var i={success:function(e){q.waitTransactionMined(e,function(e){u="",$("html, body").animate({scrollTop:0},500),setTimeout(function(){Y.sync()},600)}),B.close()},error:function(e){e.message?B.alert(e.message):B.alert("An error occured. Please reload page.")}},s=function(){"paid"==r?q.payToken(o,e,i):q.updateToken(o,r,e,i)};n?B.alert(n):t?B.confirm(t,s):s()};B({title:a,body:HTML(["form",{class:"edit-body"},["table",["tr",["td",{class:"label"},["span",n+": "]],["td",{class:"value"},["input",{type:"text",name:r}]]]]]),footer:HTML(c),beforeShow:function(){setTimeout(function(){var e=$(".edit-body .label"),n=e.find("span").width()+18;e.css("width",n),$(".edit-body .error").hide()},60)},afterShow:function(){$(".edit-body").submit(function(e){e.preventDefault(),d()});var e=$(".edit-footer");e.find(".cancel").click(B.close),e.find(".save").click(d)}})},h="id,name,codeURI,seedKey,imageURI,projectURI,minter,seedKeyHash,codeHash,randomness,paid,verified".split(","),m=function(r,e){r.verified=1==r.verified?"Yes":"No",r.paid=C(r.paid),r.openSeaURI=S(r.id,e);var c=["table"],n=function(e,n){var a=e.replace(/\s/g,"");a=a.substr(0,1).toLowerCase()+a.substr(1);var t=r[a],i="URI"==e.substr(-3);if(t||n){var s=HTML.escape(t);if(i&&t&&(s=["a",{href:t,target:"_blank"},s]),s=["div",{class:"code"},s],n){t||s.push(["span",{class:"empty"},HTML.escape("<Empty>")]);var o=["i",{class:n}];s.push({class:"editable"},["div",{class:"edit",tokenId:r.id,name:a,label:e},o])}c.push(["tr",["td",{class:"label"},e+": "],["td",{class:"value"},s]])}};return c.push(["tr",["td",{colspan:2},["div",{class:"head"},["span",{class:"id"},"#"+r.id],["span",{class:"name"},HTML.escape(r.name)]]]]),n("Verified"),n("Project URI","icon-pencil"),n("Image URI","icon-pencil"),n("Code URI","icon-pencil"),n("Code Hash"),n("Seed Key","icon-key"),n("Seed Key Hash"),n("Paid","icon-plus"),n("Randomness"),n("OpenSea URI"),c.push(["tr",["td",{colspan:2},["div",{class:"foot"},["a",{href:r.openSeaURI,target:"_blank"},"View on OpenSea",["i",{class:"icon-link-ext"}]]]]]),["div",{class:"token"},c]},v=function(){if(!c){var r=l.find(".batch[done=0]").first();if(0<r.length){c=1;var e=r.attr("batchIds").split(",");q.callContract("chainrand","tokenData",e,function(e){c=0,r.attr("done","1");for(var n=r.attr("chainId"),a=h.length,t=["div"],i=0;i<e.length;i+=a){for(var s={},o=0;o<a;++o)s[h[o]]=e[i+o];t.push(m(s,n))}r.html(HTML(t)).find(".edit").click(d)})}}},p=function(){if(n){var e=s.scrollTop();o.height()-s.height()-e<500&&v()}};window._fx=function(){window._onMinted("0x7e05cc3ad782da6cf5aa38195d8f91080e6f967f4799dc5a2c2098daef41b3ac")},window._ret=v;Y.add({label:"tokens",init:function(e){var n,a,t,i;l=$(e).html(HTML(r)),I.sync("tokens"),s=$(window),o=$("body"),s.scroll((n=p,a=300,t=0,i=function(){t=0,n()},function(){t||(t=1,setTimeout(i,a))}))},sync:function(e){q.isSignedIn()?(f("Loading..."),setTimeout(function(){q.walletAddress||q.chainUnsupported||f("Not connected")},1500),q.callContract("chainrand","tokensOfOwner",q.walletAddress,function(e){!function(e,n,a){if(e.length<1)f("Wallet has no tokens.");else{var t=0;0<b&&(b--,t=1);var i=e.join(",")+"/"+n+"/"+a;if(i!=u||t){for(var s=["div",{class:"batches"}],o=e.length,r=0;r<o;r+=5){for(var c=[],d=0;d<5&&r+d<o;++d)c.push(e[o-1-(r+d)]);s.push(["div",{class:"batch",batchIds:c.join(","),id:w(),walletAddress:n,chainId:a,done:"0"}])}u=i,l.find(".results").html(HTML(s)),v()}}}(e,q.walletAddress,q.chainId)})):f("Not connected."),I.sync("tokens")},show:function(){n=1},hide:function(){n=0}})}(),N=["div",{class:"content"},["form",{class:"form"},["div",{class:"params"},["div",{class:"type"},["name","minter"],function(e){var n=w();return["span",{class:"radio"},["input",{type:"radio",id:n,value:e,name:"type"}],["div",{class:"check"},["div"]],["label",{for:n},y(e)]]}],["div",{class:"chain"},["select",{name:"chain"},g,function(e){return e.supported?["option",{value:e.id},y(e.name)]:""}]]],["div",{class:"query"},["input",{type:"text",name:"query"}]],["div",{class:"search"},["button","Search"],["input",{type:"submit"}]]],["div",{class:"results"}]],E=function(){P.find(".results").html(HTML(["div",{class:"message"},"No results."]))},K=0,G=function(n,a){var t=5,i=++K,s=function(){if(q.config){var e=["div",n,function(e){return function(r,e){r.verified=1==r.verified?"Yes":"No",r.paid=C(r.paid),r.openSeaURI=S(r.id,e);var c=["table"],n=function(e,n){var a=e.replace(/\s/g,"");a=a.substr(0,1).toLowerCase()+a.substr(1);var t=r[a],i="URI"==e.substr(-3);if(t||n){var s=HTML.escape(t);if(i&&t&&(s=["a",{href:t,target:"_blank"},s]),s=["div",{class:"code"},s],n){t||s.push(["span",{class:"empty"},HTML.escape("<Empty>")]);var o=["i",{class:n}];s.push({class:"editable"},["div",{class:"edit",tokenId:r.id},o])}c.push(["tr",["td",{class:"label"},e+": "],["td",{class:"value"},s]])}};return c.push(["tr",["td",{colspan:2},["div",{class:"head"},["span",{class:"id"},"#"+r.id],["span",{class:"name"},HTML.escape(r.name)]]]]),n("Minter"),n("Verified"),n("Project URI"),n("Image URI"),n("Code URI"),n("Code Hash"),n("Seed Key"),n("Seed Key Hash"),n("Randomness"),c.push(["tr",["td",{colspan:2},["div",{class:"foot"},["a",{href:r.openSeaURI,target:"_blank"},"View on OpenSea",["i",{class:"icon-link-ext"}]]]]]),["div",{class:"token"},c]}(e,a)}];i==K&&P.find(".results").html(HTML(e))}else 0<t?(t--,setTimeout(s,500)):E()};s()},Y.add({label:"search",init:function(e){(P=$(e).html(HTML(N))).find('.type input[type="radio"]').first().prop("checked",!0),j=P.find("form").submit(function(e){e.preventDefault();var n,a,t=$(this);n=O(t.serializeArray()),a="#/search/"+n.chain+"/"+n.type+"/"+encodeURIComponent(n.query),window.location.hash=a})},sync:function(){q.chainId&&P.find(".chain select").val(q.chainId)},show:function(){var e=window.location.hash.match(/^(?:#\/)?search\/(\d+)\/([^\/]+)\/(.*)$/i);if(e){var n={},a=decodeURIComponent(e[3]),t=e[2].toLowerCase(),i=e[1];n[t]=a,n.c=i,j.find('input[name="query"]').val(a),j.find('select[name="chain"]').val(i),j.find('input[name="type"]').each(function(){$(this).attr("value")==t&&$(this).prop("checked",t)}),$.ajax({url:"api",type:"GET",data:n,success:function(e){e.tokens&&0<e.tokens.length?G(e.tokens,i):E()}})}}}),$(function(){Y.init(),$.ajax({url:"contracts/config.json",success:function(e){q.config=e;var n=function(){Y.sync()};V(q,{success:n,error:n})}})})}();
